---
title: "index"
author: "James Fahlbusch"
date: "November 30, 2017"
output: 
  html_document:
    code_folding: hide
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#this includes the library but by putting it in this chunk it is
#not shown
library(tidyverse)
```

## Scatterplot

```{r scatterplot}
#data()

g <- ggplot(data = mpg, aes(x = displ,y = hwy))
g + geom_point()

```

### I need color!
```{r color, echo=TRUE}
g + geom_point(aes(color = class))
```

### Get me some shapes!
```{r shape, echo=TRUE}
g + geom_point(aes(shape = class))
```

### Get me some sizes!
```{r sizes, echo=TRUE}
g + geom_point(aes(size = class))
```
## Including Plots

You can also embed plots, for example:

```{r ctyhwy, echo=TRUE}
ggplot(data=mpg, aes(x=cty, y=hwy,size=class,color=class)) + geom_point(alpha = 0.2)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


### Multiple
```{r multiple, echo=FALSE}
ggplot(data=mpg, aes(x=displ, y=hwy))+ 
geom_point()+
geom_smooth()+
labs(title = "Relationship between engine sixe and MPG",
     x= "Highway MPG",
     y="Engine Displacement")+
  theme_classic()
```


## Data Wrangling with `dplyr`
```{r dw, echo=TRUE}
library(tidyverse)
gapminder <- readr::read_csv("https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/gapminder.csv")

head(gapminder)
tail(gapminder)
summary(gapminder)
#check out the structure of your data
str(gapminder)
#column names
names(gapminder)
#dimensions of dataframe
dim(gapminder) #[1]
ncol(gapminder)
nrow(gapminder)
c(nrow(gapminder), ncol(gapminder))

```
### Using filters
```{r dwf, echo=TRUE}
#mean life expectancy in sweden
mean(filter(gapminder, country == "Sweden")$lifeExp)


```

### Pipe Operator ` %>% `
```{r pipe, echo = TRUE}
gapminder %>% head(3)

gapminder %>% 
  group_by(country) %>% 
  #filter(country == "Sweden") %>% 
  summarize(mean(lifeExp)) 

gapminder %>% 
  select(year, lifeExp) %>% 
  tail()

gapminder %>% 
  filter(country == "Cambodia",
         year == 2002) %>% 
  select(country, year, pop, gdpPercap)

gapminder %>% 
  filter(country == "Cambodia") %>% 
  select(-continent, -lifeExp)

# use mutate to add a calculated column
gapminder <- gapminder %>% 
  mutate(gdp = pop * gdpPercap,
         index = 1:nrow(gapminder))


gapminder %>% 
  filter(country %in% c("Egypt", "Vietnam")) %>% 
  group_by(country) %>% 
  summarize(maxGDP = max(gdpPercap))
  

```







